
<div id="browse_container" xmlns="http://www.w3.org/1999/html">
</div>
<% content_for :externals do %>
    <%= stylesheet_link_tag "event_calendar" %>
<% end %>

<div id="browse_container">
    <div id="title_panel">
    	<div id="header_title">
    	    <h2> <%= @coursem.course.department + " " + @coursem.course.course_number %></h2>
    	</div>

        <div id="header_name">
    	    <h3> <%= @coursem.course.name %></h3>
    	</div>
    </div>
    <div id="sub">
      <button id="sub_button" value=<%=@subscribed%> coursem_id=<%=@coursem.id%>><%= @subscribe_text%></button>
    </div>
    <div id="tabs">
          <ul>
               <li id="button_overview" class="header_button">Overview</li>
               <li id="button_resources" class="header_button">Resources</li>
               <li id="button_statistics" class="header_button">Statistics</li>
               <li id="button_calendar" class="header_button">Calendar</li>
          </ul>
    </div>

    <div id="panel_description" class="panels">
        <b>Semester</b><br />
        <p>
        <%= @coursem.semester.term + " " + @coursem.semester.year.to_s %>
        </p>

        <b>Professor</b><br />
        <p><%= @coursem.professor %></td></p>

        <b>Description</b><br />
        <p><%= @coursem.coursem_info %></p>
   </div>
                                                                            			<td class='col_classes'></td>


   <div id = "panel_resources" class="panels">
        <div class="resource_type">
          <table id="Announcement" class="resources">

            <div id="header_announcements" class = "resource_header">
              <span class="expand">+</span>
              <h2>Announcements</h2>
            </div>
              <% @coursem.resources.each do |resource| %>
                    <% if resource.type == "Anouncement" %>
                          <tr>
                            <td class="coursem_name"></td>
                            <td>
                              <%= link_to resource.name, '/resources/'+ resource.id.to_s %>
                            </td>
                            <td class="col_upvote"></td>
                            <td class="col_downvote"></td>
                          </tr>
                    <% end %>
              <% end %>

            <div id="header_posted_links" class = "resource_header">
              <span class="expand">+</span>
              <h2>Homeworks</h2>
            </div>
            <% @coursem.resources.each do |resource| %>
                <% if resource.type == "Homework" %>
                    <tr>
                      <td class="coursem_name"></td>
                      <%= link_to resource.name, '/resources/'+ resource.id.to_s %>
                    </tr>
                    </br>
                <% end %>
            <% end %>

            <div id="header_posted_links" class = "resource_header">
              <span class="expand">+</span>
              <h2>Exams</h2>
            </div>
            <% @coursem.resources.each do |resource| %>
                <% if resource.type == "Exam" %>
                    <tr>
                      <td class="coursem_name"></td>
                      <%= link_to resource.name, '/resources/'+ resource.id.to_s %>
                    </tr>
                    </br>
                <% end %>
            <% end %>

            <div id="header_posted_links" class = "resource_header">
              <span class="expand">+</span>
              <h2>Miscellaneous</h2>
            </div>
            <% @coursem.resources.each do |resource| %>
                <% if resource.type == "Misc" %>
                    <tr>
                      <td class="coursem_name"></td>
                      <%= link_to resource.name, '/resources/'+ resource.id.to_s %>
                    </tr>
                    </br>
                <% end %>
            <% end %>

          </table>
        </div>
     </div>
     <%= link_to "Add Resource", {:controller => "resources", :action => "new", :user => @user.id, :coursem => @coursem.id }, :id => "new_resource" %>
     <div id="new_resource_div"></div>

     <div class="resource_type">
        <div  class = "resource_header">
          <span class="expand">+</span>
          <h2>Announcements</h2>
        </div>
          <table class="resources">
          <% @coursem.resources.each do |resource| %>
                <% if resource.type == "Announcement" %>
                      <tr>
                        <td class="col_upvote"></td>
                        <td class="col_downvote"></td>
                        <td class="col_name"></td>
                        <td>
                          <%=  resource.name %>
                        </td>
                      </tr>
                <% end %>
          <% end %>
         </table>
     </div>

     <div class="resource_type">
       <div id="homework_announcements" class = "resource_header">
         <span class="expand">+</span>
         <h2>Homework</h2>
       </div>
       <table id="Homework" class="resources">
         <% @coursem.resources.each do |resource| %>
             <% if resource.type == "Homework" %>
                 <tr>
                   <td class="col_flag"></td>
                   <td class="col_downvote"></td>
                   <td class="col_name"></td>
                   <td>
                     <%=  resource.name %>
                   </td>
                 </tr>
             <% end %>
         <% end %>
       </table>
     </div>

</div>

    <div id="panel_calendar" class="panels">
      <div id="edit_event_div"></div>

      <%= raw(event_calendar) %>

      <%= link_to "Add Event", {:controller => "events", :action => "new", :coursem => @coursem.id }, :id => "new_event" %>
      <div id="new_event_div"></div>
    </div>

</div>
